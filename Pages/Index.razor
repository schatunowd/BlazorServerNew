@page "/"
@inject IJSRuntime JSRuntime
@inject NavigationManager NavigationManager
@implements IDisposable

@code {
    protected override void OnInitialized()
    {
        NavigationManager.LocationChanged += OnLocationChanged;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await ScrollToFragment();
    }

    public void Dispose()
    {
        NavigationManager.LocationChanged -= OnLocationChanged;
    }

    private async void OnLocationChanged(object sender, LocationChangedEventArgs e)
    {
        await ScrollToFragment();
    }

    private async Task ScrollToFragment()
    {
        var uri = new Uri(NavigationManager.Uri, UriKind.Absolute);
        var fragment = uri.Fragment;
        if (fragment.StartsWith('#'))
        {
            // Handle text fragment (https://example.org/#test:~:text=foo)
            // https://github.com/WICG/scroll-to-text-fragment/
            var elementId = fragment.Substring(1);
            var index = elementId.IndexOf(":~:", StringComparison.Ordinal);
            if (index > 0)
            {
                elementId = elementId.Substring(0, index);
            }

            if (!string.IsNullOrEmpty(elementId))
            {
                await JSRuntime.InvokeVoidAsync("BlazorScrollToId", elementId);
            }
        }
    }
}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>FilmPro</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

    <!-- ======= Header ======= -->
    <header id="header" class="fixed-top">
        <div class="container d-flex align-items-center justify-content-between">
            <h1 class="logo"><a href="index.html">FilmPro</a></h1>
            <nav id="navbar" class="navbar">
                <ul>
                    <li><a class="nav-link scrollto active" href="#hero">Главная</a></li>
                    <li><a class="nav-link scrollto" href="#about">О проекте</a></li>
                    <li><a class="nav-link scrollto" href="#search">Запуск</a></li>
                    <li><a class="nav-link scrollto" href="#contact">Контакты</a></li>
                </ul>
                <i class="bi bi-list mobile-nav-toggle"></i>
            </nav><!-- .navbar -->
        </div>
    </header><!-- End Header -->
    <!-- ======= Hero Section ======= -->
    <section id="hero" class="d-flex align-items-center">
        <div class="container position-relative" data-aos="fade-up" data-aos-delay="100">
            <div class="row justify-content-center">
                <div class="col-xl-7 col-lg-9 text-center">
                    <h1>Выбери подходящий фильм</h1>
                    <h2>С использованием машинного обучения</h2>
                </div>
            </div>
            <div class="text-center">
                <a href="#search" class="btn-get-started scrollto">Начать</a>
            </div>

            <div class="row icon-boxes">
                <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0" data-aos="zoom-in" data-aos-delay="200">
                    <div class="icon-box">
                        <div class="icon"><i class="ri-code-line"></i></div>
                        <h4 class="title"><a href="">Машинное обучение</a></h4>
                        <p class="description">Применение машинного обучения для анализа отзывов</p>
                    </div>
                </div>

                <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0" data-aos="zoom-in" data-aos-delay="300">
                    <div class="icon-box">
                        <div class="icon"><i class="ri-settings-3-line"></i></div>
                        <h4 class="title"><a href="">Агрегация</a></h4>
                        <p class="description">Сбор оценок с популярных онлайн-кинотеатров</p>
                    </div>
                </div>

                <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0" data-aos="zoom-in" data-aos-delay="400">
                    <div class="icon-box">
                        <div class="icon"><i class="ri-file-copy-2-line"></i></div>
                        <h4 class="title"><a href="">Отзывы</a></h4>
                        <p class="description">Оценка по отзывам с Кинопоиска</p>
                    </div>
                </div>

                <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0" data-aos="zoom-in" data-aos-delay="500">
                    <div class="icon-box">
                        <div class="icon"><i class="ri-fingerprint-line"></i></div>
                        <h4 class="title"><a href="">Аспектный анализ</a></h4>
                        <p class="description">Вычисление оценок различных аспектов фильма</p>
                    </div>
                </div>

            </div>
        </div>
    </section><!-- End Hero -->

    <main id="main">

        <!-- ======= About Section ======= -->
        <section id="about" class="about">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>О проекте</h2>
                </div>

                <div class="row content">
                    <div class="col-lg-6">
                        <p>
                            Данный сервис разработан в рамках выпускной квалификационной работы "Разработка веб-сервиса для анализа отзывов к фильмам"
                            При поддержке <a href="https://www.vyatsu.ru/contacts/159">Разовой Елены Владимировны</a>
                        </p>
                        <ul>
                            <li><i class="ri-check-double-line"></i> Факультет компьютерных и физико-математических наук</li>
                            <li><i class="ri-check-double-line"></i> Направление: Фундаментальная информатика и информационные технологии</li>
                            <li><i class="ri-check-double-line"></i> Специальность: Разработка программного обеспечения</li>
                        </ul>
                    </div>
                    <div class="col-lg-6 pt-4 pt-lg-0">
                        <p>
                            Данный сервис собирает оценки по фильмам с различных площадок, таких как Кинопоиск, IMDB, IVI вместе,
                            а также при помощи машинного обучения анализирует отзывы и выводит свои оценки: общую оценку за фильм, оценки по различным аспектам
                            таким как: музыка и звук, актеры, сюжет, зрелищность
                            При создании использовалась библиотека ML.NET, фреймворки Blazor и Bootstrap
                        </p>
                    </div>
                </div>

            </div>
        </section><!-- End About Section -->
        <!-- ======= Counts Section ======= -->
        <section id="counts" class="counts section-bg">
            <div class="container">

                <div class="row justify-content-end">

                    <div class="col-lg-3 col-md-5 col-6 d-md-flex align-items-md-stretch">
                        <div class="count-box">
                            <span data-purecounter-start="0" data-purecounter-end="65" data-purecounter-duration="2" class="purecounter"></span>
                            <p> % точности аспектного анализа</p>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-5 col-6 d-md-flex align-items-md-stretch">
                        <div class="count-box">
                            <span data-purecounter-start="0" data-purecounter-end="100000" data-purecounter-duration="2" class="purecounter"></span>
                            <p>Фильмов</p>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-5 col-6 d-md-flex align-items-md-stretch">
                        <div class="count-box">
                            <span data-purecounter-start="0" data-purecounter-end="90" data-purecounter-duration="2" class="purecounter"></span>
                            <p>% точности оценки фильма</p>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-5 col-6 d-md-flex align-items-md-stretch">
                        <div class="count-box">
                            <span data-purecounter-start="0" data-purecounter-end="1" data-purecounter-duration="2" class="purecounter"></span>
                            <p>Разработчик</p>
                        </div>
                    </div>

                </div>

            </div>
        </section><!-- End Counts Section -->


        <section id="search" class="search">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>Поиск фильма</h2>
                    <p class="titlesearch">Введите название фильма и год (необязательно), чтобы получить результат.</p>
                </div>

                <div class="row align-items-center">

                    <div class="row justify-content-center">

                        <div class="col-md-3 form-group">
                            <input type="text" name="name" class="form-control" id="name" @bind="@filmname" placeholder="Название фильма" required>
                        </div>
                        <div class="col-md-3 form-group">
                            <input type="text" class="form-control" name="year" @bind="@year" id="year" placeholder="Год фильма" required>
                        </div>
                        <div class="col-md-3">
                            <button class="Result" @onclick="GetData" disabled=@isLoading>Получить результат</button>
                        </div>
                    </div>

                    @if (check == 0)
                    {
                        <p>Loading ...</p>
                        <div class="spinner-border" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    }

                    @if (answers == null || answers.Count == 0)
                    {
                    }
                    else
                    {
                        <p></p>
                        <div>
                            <link href="./stats.css" rel="stylesheet" />
                            <div class="home-container">
                                <div class="home-stats">
                                    <div class="home-stat">
                                        <svg viewBox="0 0 1024 1024" class="home-icon">
                                            <path d="M1024 397.050l-353.78-51.408-158.22-320.582-158.216 320.582-353.784 51.408 256 249.538-60.432 352.352 316.432-166.358 316.432 166.358-60.434-352.352 256.002-249.538z"></path>
                                        </svg>
                                        <span class="home-text">Полученная оценка</span>
                                        <h1 class="home-text01">@answers[0]</h1>
                                    </div>
                                    <div class="home-stat1">
                                        <svg viewBox="0 0 1024 1024" class="home-icon02">
                                            <path d="M932 550l-114 262q-26 42-74 42h-346q-40 0-70-30t-30-70v-334q0-36 26-62l274-272 18 20q24 24 38 52 6 14 4 28l-40 198h236q34 0 59 26t25 60v46q0 18-6 34zM86 854v-470h84q18 0 31 12t13 30v384q0 18-13 31t-31 13h-84z"></path>
                                        </svg>
                                        <span class="home-text02">Положительные</span>
                                        <h1 class="home-text03"><span>@answers[2]</span></h1>
                                    </div>
                                    <div class="home-stat2">
                                        <svg viewBox="0 0 1024 1024" class="home-icon04">
                                            <path d="M810 128h172v512h-172v-512zM640 128q34 0 60 26t26 60v426q0 34-26 60l-280 282-46-46q-18-18-18-44v-14l42-196h-270q-34 0-60-25t-26-59v-86q0-16 6-32l130-300q20-52 78-52h384z"></path>
                                        </svg>
                                        <span class="home-text05">Отрицательные</span>
                                        <h1 class="home-text06"><span>@answers[3]</span></h1>
                                    </div>
                                </div>
                                <div class="home-stats1">
                                    <div class="home-stat3">
                                        <svg viewBox="0 0 1152 1024" class="home-icon06">
                                            <path d="M768 770.612v-52.78c70.498-39.728 128-138.772 128-237.832 0-159.058 0-288-192-288s-192 128.942-192 288c0 99.060 57.502 198.104 128 237.832v52.78c-217.102 17.748-384 124.42-384 253.388h896c0-128.968-166.898-235.64-384-253.388z"></path>
                                            <path d="M327.196 795.328c55.31-36.15 124.080-63.636 199.788-80.414-15.054-17.784-28.708-37.622-40.492-59.020-30.414-55.234-46.492-116.058-46.492-175.894 0-86.042 0-167.31 30.6-233.762 29.706-64.504 83.128-104.496 159.222-119.488-16.914-76.48-61.94-126.75-181.822-126.75-192 0-192 128.942-192 288 0 99.060 57.502 198.104 128 237.832v52.78c-217.102 17.748-384 124.42-384 253.388h279.006c14.518-12.91 30.596-25.172 48.19-36.672z"></path>
                                        </svg>
                                        <span class="home-text08">Актеры</span>
                                        <h1 class="home-text09">@answers[4]</h1>
                                    </div>
                                    <div class="home-stat4">
                                        <svg viewBox="0 0 877.7142857142857 1024" class="home-icon09">
                                            <path d="M877.714 128v640c0 80.571-120.571 109.714-182.857 109.714s-182.857-29.143-182.857-109.714 120.571-109.714 182.857-109.714c37.714 0 75.429 6.857 109.714 22.286v-306.857l-438.857 135.429v405.143c0 80.571-120.571 109.714-182.857 109.714s-182.857-29.143-182.857-109.714 120.571-109.714 182.857-109.714c37.714 0 75.429 6.857 109.714 22.286v-552.571c0-24 16-45.143 38.857-52.571l475.429-146.286c5.143-1.714 10.286-2.286 16-2.286 30.286 0 54.857 24.571 54.857 54.857z"></path>
                                        </svg>
                                        <span class="home-text10">Музыка и звук</span>
                                        <h1 class="home-text11"><span>@answers[5]</span></h1>
                                    </div>
                                    <div class="home-stat5">
                                        <svg viewBox="0 0 1024 1024" class="home-icon11">
                                            <path d="M746.752 513.408l-180.949-104.875 91.221-218.923c2.816-5.717 4.395-12.16 4.395-18.944 0-23.552-18.987-42.667-42.539-42.667-10.624 0.171-19.499 3.541-26.539 9.131-1.408 1.109-2.261 1.792-2.987 2.56l-320 302.933c-9.771 9.259-14.592 22.571-13.056 35.925 1.536 13.355 9.344 25.216 20.949 32l180.992 104.96-92.288 221.44c-7.808 18.603-1.451 40.107 15.104 51.541 7.381 5.035 15.872 7.509 24.277 7.509 10.581 0 21.163-3.968 29.355-11.691l320-303.019c9.771-9.259 14.592-22.571 13.056-35.925-1.579-13.355-9.387-25.216-20.992-31.957z"></path>
                                        </svg>
                                        <span class="home-text13">Зрелищность</span>
                                        <h1 class="home-text14"><span>@answers[6]</span></h1>
                                    </div>
                                    <div class="home-stat6">
                                        <svg viewBox="0 0 1152 1024" class="home-icon13">
                                            <path d="M480 0v0c265.096 0 480 173.914 480 388.448s-214.904 388.448-480 388.448c-25.458 0-50.446-1.62-74.834-4.71-103.106 102.694-222.172 121.108-341.166 123.814v-25.134c64.252-31.354 116-88.466 116-153.734 0-9.106-0.712-18.048-2.030-26.794-108.558-71.214-177.97-179.988-177.97-301.89 0-214.534 214.904-388.448 480-388.448zM996 870.686c0 55.942 36.314 104.898 92 131.772v21.542c-103.126-2.318-197.786-18.102-287.142-106.126-21.14 2.65-42.794 4.040-64.858 4.040-95.47 0-183.408-25.758-253.614-69.040 144.674-0.506 281.26-46.854 384.834-130.672 52.208-42.252 93.394-91.826 122.414-147.348 30.766-58.866 46.366-121.582 46.366-186.406 0-10.448-0.45-20.836-1.258-31.168 72.57 59.934 117.258 141.622 117.258 231.676 0 104.488-60.158 197.722-154.24 258.764-1.142 7.496-1.76 15.16-1.76 22.966z"></path>
                                        </svg>
                                        <span class="home-text16">Сюжет</span>
                                        <h1 class="home-text17">@answers[7]</h1>
                                    </div>
                                </div>
                            </div>
                        </div>

                    }

                    @code {
                        private List<string>
                        ? answers = null;
                        private bool isLoading = false;
                        public string filmname = "";
                        public string year = "";
                        private int check = 1;
                        private string Text = "";

                        private async Task GetData()
                        {
                            check = 0;
                            isLoading = true;
                            if (year != "")
                                Text = filmname + " " + year;
                            else
                                Text = filmname;
                            answers = new List<string>
                                ();
                            check = 0;
                            answers = await Data.Exec.GetScoreAsync(Text);
                            isLoading = false;
                            check = 1;
                        }
                    }

                    @* <div class="row justify-content-center">

                            <div class="col-md-6">
                                <div>
                                    <br><br>
                                    <h3 class="lookresult">Посмотрим, что у нас вышло...</h3>
                                    <br><br>
                                    Полученная оценка: 10<br><br>
                                    Всего отзывов: скорее всего здесь надо вставлять какие-то outputы<br><br>
                                    Положительных: не ебу как это со скриптом сделать<br><br>
                                    Негативных: <br><br>
                                    Больше всего зрителям понравилось: трахать гриба
                                </div>
                            </div>
                        </div>*@

                </div>

            </div>
        </section><!-- End Contact Section -->
        <!-- ======= Contact Section ======= -->
        <section id="contact" class="contact">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>Контакты</h2>
                    <p>Свяжитесь с нами если у Вас есть вопросы.</p>
                </div>

                <div>
                    <iframe style="border:0; width: 100%; height: 270px;" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1039.6164160962146!2d49.68152625783592!3d58.5916032622707!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x43fcf43ab3ef1877%3A0x59b89fe72cd9de6b!2sVyatka%20State%20University%20of%20Humanities!5e0!3m2!1sen!2sru!4v1653492062495!5m2!1sen!2sru" frameborder="0" allowfullscreen></iframe>
                </div>

                <div class="row mt-5">

                    <div class="col-lg-4">
                        <div class="info">
                            <div class="address">
                                <i class="bi bi-geo-alt"></i>
                                <h4>Местоположение:</h4>
                                <p>Киров, Ленина 111</p>
                            </div>

                            <div class="email">
                                <i class="bi bi-envelope"></i>
                                <h4>Email:</h4>
                                <p>stud107861@vyatsu.ru</p>
                            </div>


                        </div>

                    </div>

                    <div class="col-lg-8 mt-5 mt-lg-0">

                        <form action="forms/contact.php" method="post" role="form" class="php-email-form">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    <input type="text" name="name" class="form-control" id="name" placeholder="Ваше имя" required>
                                </div>
                                <div class="col-md-6 form-group">
                                    <input type="email" class="form-control" name="email" id="email" placeholder="Ваш Email" required>
                                </div>
                            </div>
                            <div class="form-group mt-3">
                                <input type="text" class="form-control" name="subject" id="subject" placeholder="Тема" required>
                            </div>
                            <div class="form-group mt-3">
                                <textarea class="form-control" name="message" rows="5" placeholder="Сообщение" required></textarea>
                            </div>
                            <div class="my-3">
                                <div class="loading">Загрузка</div>
                                <div class="error-message"></div>
                                <div class="sent-message">Ваше сообщение было отправлено. Спасибо!</div>
                            </div>
                            <div class="text-center"><button type="submit">Отправить</button></div>
                        </form>

                    </div>

                </div>

            </div>
        </section><!-- End Contact Section -->

    </main><!-- End #main -->
    <!-- ======= Footer ======= -->
    <footer id="footer">

        <div class="footer-top">
            <div class="container">
                <div class="row">

                    <div class="col-lg-3 col-md-6 footer-contact">
                        <h3>FilmPro</h3>
                        <p>
                            Ленина 111 <br>
                            Киров<br>
                            Российская Федерация <br><br>
                            <strong> Email: </strong> stud107861@vyatsu.ru<br>
                        </p>
                    </div>

                    <div class="col-lg-2 col-md-6 footer-links">
                        <h4>Ссылки</h4>
                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a href="#hero">На главную</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a href="#about">О проекте</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a href="https://github.com/schatunowd/web-service-blazor-">GitHub</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="container d-md-flex py-4">

            <div class="me-md-auto text-center text-md-start">
                <div class="copyright">
                    &copy; Copyright <strong><span>OnePage</span></strong>. All Rights Reserved
                </div>
                <div class="credits">
                    <!-- All the links in the footer should remain intact. -->
                    <!-- You can delete the links only if you purchased the pro version. -->
                    <!-- Licensing information: https://bootstrapmade.com/license/ -->
                    <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/onepage-multipurpose-bootstrap-template/ -->
                    Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
                </div>
            </div>
        </div>
    </footer><!-- End Footer -->
    <!-- Vendor JS Files -->

</body>

</html>